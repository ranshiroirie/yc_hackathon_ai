# AIé–‹ç™ºãƒãƒ¼ãƒ  MCPçµ±åˆã‚¬ã‚¤ãƒ‰

## ğŸ› ï¸ MCP (Model Context Protocol) çµ±åˆæ¦‚è¦

### åˆ©ç”¨å¯èƒ½ãªMCPãƒ„ãƒ¼ãƒ«
- **Serena**: LSPãƒ™ãƒ¼ã‚¹ã®ã‚³ãƒ¼ãƒ‰åˆ†æãƒ»ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
- **Linear**: ã‚¿ã‚¹ã‚¯ç®¡ç†ãƒ»ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¿½è·¡
- **Airtable**: ãƒ‡ãƒ¼ã‚¿ç®¡ç†ãƒ»è¦ä»¶ä»•æ§˜ç®¡ç†
- **GitHub**: ãƒªãƒã‚¸ãƒˆãƒªç®¡ç†ãƒ»PR/Issueæ“ä½œ
- **Supabase**: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç®¡ç†ãƒ»SQLå®Ÿè¡Œ
- **Firebase**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šãƒ»Functionsç®¡ç†
- **Figma**: ãƒ‡ã‚¶ã‚¤ãƒ³ä»•æ§˜ç¢ºèªï¼ˆäºˆå®šï¼‰

## ğŸ“‹ å½¹å‰²åˆ¥MCPæ´»ç”¨ãƒãƒˆãƒªã‚¯ã‚¹

| å½¹å‰² | Serena | Linear | Airtable | GitHub | Supabase | Firebase |
|------|--------|--------|----------|---------|----------|----------|
| ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒˆ | â— | â— | â— | â— | â—‹ | â—‹ |
| Flutterã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ | â— | â— | â–³ | â— | â–³ | â–³ |
| Firebaseã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ | â— | â— | â— | â— | â–³ | â— |
| Supabaseã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ | â—‹ | â— | â–³ | â— | â— | â–³ |

- â—: ä¸»è¦ãƒ„ãƒ¼ãƒ«ï¼ˆæ—¥å¸¸çš„ã«ä½¿ç”¨ï¼‰
- â—‹: è£œåŠ©ãƒ„ãƒ¼ãƒ«ï¼ˆå¿…è¦æ™‚ä½¿ç”¨ï¼‰
- â–³: å‚ç…§ã®ã¿

## ğŸ”„ ç’°å¢ƒåˆ¥è¨­å®š

### é–‹ç™ºç’°å¢ƒæ§‹æˆ
```yaml
# .cursor/environments/config.yaml

environments:
  development:
    firebase:
      emulator: true
      project: "homii-world-dev"
    supabase:
      local: true
      project_ref: "local"
    flutter:
      flavor: "development"
      constants:
        USE_LOCALHOST: true
        IS_INTERNAL: true
        
  staging:
    firebase:
      emulator: false
      project: "homii-world-staging"
    supabase:
      local: false
      project_ref: "staging-xxxxx"
    flutter:
      flavor: "staging"
      constants:
        USE_LOCALHOST: false
        IS_INTERNAL: true
        
  production:
    firebase:
      emulator: false
      project: "homii-world-prod"
    supabase:
      local: false  
      project_ref: "prod-xxxxx"
    flutter:
      flavor: "production"
      constants:
        USE_LOCALHOST: false
        IS_INTERNAL: false
```

### ç’°å¢ƒåˆ‡ã‚Šæ›¿ãˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ
```bash
#!/bin/bash
# switch-environment.sh

ENV=$1

case $ENV in
  "dev")
    echo "Switching to Development environment..."
    # Firebase
    firebase use homii-world-dev
    # Supabase
    supabase link --project-ref local
    # Flutter
    echo "DEV" > flutter-app/.env
    ;;
  "staging")
    echo "Switching to Staging environment..."
    firebase use homii-world-staging
    supabase link --project-ref staging-xxxxx
    echo "STAGING" > flutter-app/.env
    ;;
  "prod")
    echo "Switching to Production environment..."
    firebase use homii-world-prod
    supabase link --project-ref prod-xxxxx
    echo "PROD" > flutter-app/.env
    ;;
esac

echo "Environment switched to: $ENV"
```

## ğŸ¤– AIå‘ã‘MCPæ´»ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³

### 1. Serenaæ´»ç”¨ï¼ˆã‚³ãƒ¼ãƒ‰è§£æï¼‰
```markdown
## ã‚³ãƒ¼ãƒ‰èª¿æŸ»ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ

Serena MCPã‚’ä½¿ç”¨ã—ã¦ã€æ—¢å­˜ã®èªè¨¼å®Ÿè£…ã‚’èª¿æŸ»ã—ã¾ã™ã€‚

1. èªè¨¼é–¢é€£ã®ã‚·ãƒ³ãƒœãƒ«æ¤œç´¢
   - `AuthService` ã‚¯ãƒ©ã‚¹ã®å®šç¾©ã¨ä½¿ç”¨ç®‡æ‰€
   - `signIn` ãƒ¡ã‚½ãƒƒãƒ‰ã®å®Ÿè£…è©³ç´°
   - èªè¨¼ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®æ§‹é€ 

2. ä¾å­˜é–¢ä¿‚ã®åˆ†æ
   - èªè¨¼ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
   - èªè¨¼çŠ¶æ…‹ã«ä¾å­˜ã™ã‚‹ç”»é¢

3. ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ææ¡ˆ
   - æ”¹å–„å¯èƒ½ãªç®‡æ‰€ã®ç‰¹å®š
   - ã‚ˆã‚Šè‰¯ã„ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ææ¡ˆ
```

### 2. Linearæ´»ç”¨ï¼ˆã‚¿ã‚¹ã‚¯ç®¡ç†ï¼‰
```typescript
// AIç”¨Linearã‚¿ã‚¹ã‚¯ç®¡ç†ãƒ˜ãƒ«ãƒ‘ãƒ¼
class AILinearHelper {
  // è‡ªåˆ†ã®æ‹…å½“ã‚¿ã‚¹ã‚¯å–å¾—
  async getMyTasks(aiRole: string): Promise<Issue[]> {
    return await linear.listIssues({
      filter: {
        labels: { name: { contains: `AI-Assignee: ${aiRole}` } },
        state: { type: { in: ["unstarted", "started"] } },
      },
      orderBy: "priority",
    });
  }
  
  // é€²æ—å ±å‘Š
  async reportProgress(issueId: string, progress: ProgressReport) {
    await linear.createComment({
      issueId,
      body: formatProgressReport(progress),
    });
    
    if (progress.blockers.length > 0) {
      await linear.updateIssue({
        id: issueId,
        labelIds: [...currentLabels, "blocked"],
      });
    }
  }
  
  // ã‚¿ã‚¹ã‚¯å®Œäº†
  async completeTask(issueId: string, summary: CompletionSummary) {
    await linear.updateIssue({
      id: issueId,
      stateId: "done-state-id",
    });
    
    await linear.createComment({
      issueId,
      body: formatCompletionSummary(summary),
    });
  }
}
```

### 3. Airtableæ´»ç”¨ï¼ˆä»•æ§˜ç®¡ç†ï¼‰
```typescript
// è¦ä»¶ãƒ»ä»•æ§˜å–å¾—ãƒ˜ãƒ«ãƒ‘ãƒ¼
class AIAirtableHelper {
  // æ©Ÿèƒ½è¦ä»¶å–å¾—
  async getFeatureRequirements(featureName: string) {
    const records = await airtable.searchRecords({
      baseId: REQUIREMENTS_BASE_ID,
      tableId: "Features",
      searchTerm: featureName,
    });
    
    return records.map(r => ({
      id: r.fields.requirement_id,
      description: r.fields.description,
      priority: r.fields.priority,
      acceptance_criteria: r.fields.acceptance_criteria,
    }));
  }
  
  // APIä»•æ§˜å–å¾—
  async getAPISpecification(endpoint: string) {
    const records = await airtable.listRecords({
      baseId: SPECS_BASE_ID,
      tableId: "API_Endpoints",
      filterByFormula: `{endpoint} = '${endpoint}'`,
    });
    
    return {
      request: JSON.parse(records[0].fields.request_schema),
      response: JSON.parse(records[0].fields.response_schema),
      validation: records[0].fields.validation_rules,
    };
  }
}
```

### 4. GitHubæ´»ç”¨ï¼ˆã‚³ãƒ¼ãƒ‰ç®¡ç†ï¼‰
```typescript
// AIç”¨GitHubæ“ä½œãƒ˜ãƒ«ãƒ‘ãƒ¼
class AIGitHubHelper {
  // PRä½œæˆ
  async createPR(feature: FeatureImplementation) {
    // ãƒ–ãƒ©ãƒ³ãƒä½œæˆ
    await github.createBranch({
      owner: "homii-world",
      repo: "homii-app",
      branch: `feature/${feature.name}`,
      from_branch: "main",
    });
    
    // PRä½œæˆ
    const pr = await github.createPullRequest({
      owner: "homii-world",
      repo: "homii-app",
      title: `feat: ${feature.title}`,
      head: `feature/${feature.name}`,
      base: "main",
      body: this.generatePRDescription(feature),
      draft: false,
    });
    
    // Linearé€£æº
    await this.linkLinearIssue(pr.number, feature.linearIssueId);
    
    return pr;
  }
  
  // ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¾é ¼
  async requestReview(prNumber: number, reviewers: string[]) {
    await github.requestReviewers({
      owner: "homii-world",
      repo: "homii-app",
      pull_number: prNumber,
      reviewers: reviewers,
    });
  }
}
```

## ğŸ“Š çµ±åˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰æ¦‚å¿µ

### AIãƒãƒ¼ãƒ æ´»å‹•ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
```typescript
interface AITeamDashboard {
  tasks: {
    total: number;
    inProgress: number;
    completed: number;
    blocked: number;
    byRole: Record<string, TaskStats>;
  };
  
  quality: {
    codeHealth: {
      lintErrors: number;
      testCoverage: number;
      buildStatus: "passing" | "failing";
    };
    reviewMetrics: {
      openPRs: number;
      avgReviewTime: number;
      approvalRate: number;
    };
  };
  
  productivity: {
    velocity: number;
    cycleTime: number;
    throughput: number;
  };
  
  costs: {
    firebase: {
      functions: number;
      storage: number;
      total: number;
    };
    externalAPIs: {
      googleMaps: number;
      others: number;
    };
  };
}
```

## ğŸš€ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †

### 1. åˆæœŸè¨­å®š
```bash
# ãƒªãƒã‚¸ãƒˆãƒªã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://github.com/homii-world/homii-app.git
cd homii-app

# ç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
./scripts/setup-ai-environment.sh

# MCPè¨­å®šç¢ºèª
cursor --list-mcp-tools
```

### 2. èªè¨¼è¨­å®š
```bash
# å„ã‚µãƒ¼ãƒ“ã‚¹ã®èªè¨¼
linear auth login
airtable auth setup
github auth login
supabase login
firebase login
```

### 3. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š
```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé€£æº
linear projects link --id "homii-world"
airtable bases link --id "app_xxxxx"
supabase link --project-ref "xxxxx"
firebase use homii-world-dev
```

### 4. AIåˆ¥åˆæœŸåŒ–
```markdown
## å„AIåˆå›èµ·å‹•æ™‚

ç§ã¯[å½¹å‰²å]ã¨ã—ã¦ã€Homii Worldãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®é–‹ç™ºã‚’é–‹å§‹ã—ã¾ã™ã€‚

åˆæœŸè¨­å®š:
1. MCPé€£æºç¢ºèª
2. è‡ªåˆ†ã®å½¹å‰²ã¨ãƒ«ãƒ¼ãƒ«ç¢ºèªï¼ˆ.cursor/rules/roles/ï¼‰
3. ç¾åœ¨ã®ã‚¿ã‚¹ã‚¯ç¢ºèªï¼ˆLinearï¼‰
4. é–‹ç™ºç’°å¢ƒæº–å‚™

æº–å‚™ãŒå®Œäº†ã—ãŸã‚‰ã€æœ€å„ªå…ˆã‚¿ã‚¹ã‚¯ã‹ã‚‰ä½œæ¥­ã‚’é–‹å§‹ã—ã¾ã™ã€‚
```

## ğŸ“– ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### MCPæ¥ç¶šã‚¨ãƒ©ãƒ¼
```bash
# æ¥ç¶šçŠ¶æ…‹ç¢ºèª
cursor mcp status

# å†æ¥ç¶š
cursor mcp reconnect [tool-name]

# ãƒ­ã‚°ç¢ºèª
cursor mcp logs [tool-name]
```

### ç’°å¢ƒä¸æ•´åˆ
```bash
# ç’°å¢ƒãƒªã‚»ãƒƒãƒˆ
./scripts/reset-environment.sh

# è¨­å®šå†èª­ã¿è¾¼ã¿
source .cursor/environments/config.sh
```

---

**MCPçµ±åˆæ–¹é‡**: å„AIãŒå¿…è¦ãªãƒ„ãƒ¼ãƒ«ã«é©åˆ‡ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã€äººé–“ã®ä»‹å…¥ãªã—ã«è‡ªå¾‹çš„ã«ä½œæ¥­ã§ãã‚‹ç’°å¢ƒã‚’æ§‹ç¯‰ã€‚ãƒ„ãƒ¼ãƒ«é–“ã®é€£æºã‚’æ´»ç”¨ã—ã€åŠ¹ç‡çš„ãªé–‹ç™ºãƒ•ãƒ­ãƒ¼ã‚’å®Ÿç¾ã—ã¾ã™ã€‚