# AI開発チーム コミュニケーションワークフロー

## 🔄 開発フロー全体像

```mermaid
graph TD
    A[エンジニアリングマネージャー] -->|要件定義| B[システムアーキテクト]
    B -->|設計指示| C[Flutterエンジニア]
    B -->|設計指示| D[Firebaseエンジニア]
    B -->|設計指示| E[Supabaseエンジニア]
    
    C -->|API要求| D
    D -->|DB要求| E
    
    C -->|進捗報告| A
    D -->|進捗報告| A
    E -->|進捗報告| A
    B -->|設計レビュー| A
    
    style A fill:#f9f,stroke:#333,stroke-width:4px
    style B fill:#bbf,stroke:#333,stroke-width:2px
    style C fill:#bfb,stroke:#333,stroke-width:2px
    style D fill:#fbf,stroke:#333,stroke-width:2px
    style E fill:#ffb,stroke:#333,stroke-width:2px
```

## 📋 フェーズ別コミュニケーションフロー

### Phase 1: 要件定義・設計フェーズ

#### 1.1 要件伝達（マネージャー → アーキテクト）
```markdown
## 新機能要件: [機能名]

### ビジネス要求
[CEO/デザイナーからの要求内容]

### 機能要件
- FR-001: [要件詳細]
- FR-002: [要件詳細]

### 非機能要件
- NFR-001: 応答時間 < 500ms
- NFR-002: 同時接続 1000ユーザー

### 制約・期限
- リリース予定: YYYY-MM-DD
- コスト上限: ¥X,XXX/月

### 添付資料
- 画面デザイン: [Figmaリンク]
- ユーザーフロー: [図表リンク]

@システムアーキテクト
上記要件での技術設計をお願いします。
不明点があれば質問してください。
```

#### 1.2 設計提案（アーキテクト → マネージャー）
```markdown
## 技術設計提案: [機能名]

### アーキテクチャ概要
[設計の概要説明]

### コンポーネント分担
1. **Flutter App**
   - 画面: [画面リスト]
   - 状態管理: [Provider構成]

2. **Firebase Functions**
   - API: [エンドポイントリスト]
   - 処理時間見積: XXms

3. **Supabase**
   - テーブル: [テーブルリスト]
   - RLS: [ポリシー概要]

### 実装見積もり
- 総工数: XX人日
- Flutter: X日
- Firebase: Y日
- Supabase: Z日

### リスク評価
- [リスク1]: [対策案]

### 確認事項
- [質問1]
- [質問2]

承認いただければ、各エンジニアに詳細設計を展開します。
```

#### 1.3 設計展開（アーキテクト → 各エンジニア）
```markdown
## 実装指示: [機能名] - [コンポーネント]担当

### 担当範囲
@[エンジニア名]
以下の実装をお願いします。

### 設計詳細
[コンポーネント別の詳細設計]

### インターフェース仕様
```typescript
// API/DB/UIインターフェース定義
```

### 実装優先順位
1. [タスク1] - 期限: MM/DD
2. [タスク2] - 期限: MM/DD

### 他チームとの連携
- [連携内容と時期]

### 参考資料
- 全体設計書: [リンク]
- API仕様: [リンク]

実装開始前に不明点があれば確認してください。
```

### Phase 2: 実装フェーズ

#### 2.1 実装開始報告（各エンジニア → マネージャー/アーキテクト）
```markdown
## 実装開始: [機能名] - [コンポーネント]

### 実装計画
- 開始: YYYY-MM-DD
- 完了予定: YYYY-MM-DD
- 対象ファイル: [ファイルリスト]

### 本日の作業
- [タスク1]: [詳細]
- [タスク2]: [詳細]

### 依存関係
- [他チームへの依存]

既存コードを確認し、設計に従って実装を進めます。
```

#### 2.2 連携要求（エンジニア → エンジニア）
```markdown
## API連携要求: [機能名]

@Firebaseエンジニア

Flutter側の実装で以下のAPIが必要です：

### 必要なエンドポイント
- `getUserProfile`: ユーザー情報取得
  - パラメータ: user_id
  - レスポンス: UserProfile型

### 要件
- キャッシュ: 5分
- エラー時: 詳細なエラーコード

### 希望納期
MM/DD までに実装完了希望

よろしくお願いします。
```

#### 2.3 進捗報告（各エンジニア → マネージャー）
```markdown
## 日次進捗: [機能名] - [コンポーネント]

### 完了項目
- ✅ [タスク1]: [成果]
- ✅ [タスク2]: [成果]

### 進行中
- 🔄 [タスク3]: 70%完了
  - 残作業: [詳細]

### ブロッカー
- 🚨 [問題]: [詳細]
  - 必要サポート: [内容]

### 明日の予定
- [タスク4]
- [タスク5]

### コミット
- [コミットハッシュ]: [変更内容]
```

### Phase 3: レビュー・テストフェーズ

#### 3.1 実装完了報告（各エンジニア → アーキテクト）
```markdown
## 実装完了: [機能名] - [コンポーネント]

### 実装内容
- 完了機能: [リスト]
- 変更ファイル: XX個
- テストカバレッジ: YY%

### 動作確認
- [ ] ローカルテスト完了
- [ ] 統合テスト完了
- [ ] パフォーマンステスト完了

### PR情報
- PR: #XXX
- レビュー依頼: @システムアーキテクト

### 特記事項
- [実装上の工夫]
- [既知の制限]

レビューをお願いします。
```

#### 3.2 技術レビュー（アーキテクト → 各エンジニア）
```markdown
## レビュー結果: [PR番号]

### 全体評価
設計との整合性: ✅ 問題なし

### Critical Issues
なし

### Major Issues
1. **パフォーマンス**: [改善提案]
   ```diff
   - // 現在のコード
   + // 推奨コード
   ```

### Minor Suggestions
1. **命名**: [提案]

### 承認条件
- [ ] Major Issues対応
- [ ] テスト追加

修正後、再レビューします。
```

### Phase 4: リリースフェーズ

#### 4.1 リリース準備確認（アーキテクト → マネージャー）
```markdown
## リリース準備完了: [機能名]

### 実装状況
- Flutter: ✅ 完了
- Firebase: ✅ 完了
- Supabase: ✅ 完了

### 品質確認
- 自動テスト: ✅ 全パス
- 統合テスト: ✅ 完了
- パフォーマンス: ✅ 基準クリア

### ドキュメント
- 設計書: ✅ 更新済
- API仕様: ✅ 更新済
- README: ✅ 更新済

### デプロイ手順
1. [手順1]
2. [手順2]

リリース承認をお願いします。
```

## 📂 ドキュメント体系

### ディレクトリ構造
```
.cursor/
├── rules/
│   ├── roles/              # 各役割の定義
│   ├── communication/      # コミュニケーションルール
│   └── common/            # 共通ルール
├── tasks/                 # タスク管理
│   ├── active/           # 進行中タスク
│   ├── backlog/          # バックログ
│   └── completed/        # 完了タスク
└── knowledge/            # ナレッジベース
    ├── decisions/        # 意思決定記録
    ├── learnings/        # 学習記録
    └── templates/        # テンプレート
```

### ドキュメント命名規則
```
# タスク文書
TASK-YYYYMMDD-[機能名]-[フェーズ].md

# 設計文書
DESIGN-[機能名]-[バージョン].md

# 議事録
MEETING-YYYYMMDD-[種別].md

# 決定記録
DECISION-YYYYMMDD-[件名].md
```

## 🔔 通知ルール

### 緊急度レベル
- 🚨 **Critical**: 即時対応必要（ブロッカー）
- ⚠️ **High**: 当日中の対応必要
- 📢 **Normal**: 通常の進捗報告
- 💡 **Low**: 情報共有・提案

### エスカレーションパス
```
問題発生
  ↓
担当エンジニア（15分以内に解決試行）
  ↓
システムアーキテクト（技術的解決策検討）
  ↓
エンジニアリングマネージャー（ビジネス判断）
```

---

**コミュニケーション方針**: 非同期を基本とし、明確で構造化されたコミュニケーションを重視。各役割の自律性を保ちながら、必要な情報が適切に共有される仕組みを維持します。